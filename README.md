# TapMePlus1 自动通关脚本

这是一个为网页游戏 "TapMePlus1" (https://tapmeplus1.com/zh) 编写的 Tampermonkey 自动通关脚本。该脚本能够自动分析游戏状态并执行最佳操作，以帮助玩家自动完成游戏。

## 主要功能

1. **自动点击最优位置**：通过算法评估每个可能的点击位置和点击次数，选择最佳选择
2. **预测和模拟**：模拟点击后的连锁反应和得分情况
3. **动态策略**：根据当前行动点数量调整点击策略
4. **破局模式**：当无法找到标准的好点击时，采用特殊策略突破困局
5. **游戏状态监控**：自动识别游戏开始、结束和重启状态
6. **用户界面**：提供控制面板，支持开始、暂停、重置操作
7. **日志记录**：详细记录每步操作和决策过程

## 核心算法

1. **棋盘状态分析**：从DOM中读取当前游戏棋盘状态和行动点数量
2. **连通组查找**：通过广度优先搜索找出所有符合消除条件的连通区域
3. **模拟消除**：模拟点击后的连锁反应和得分情况
4. **评分系统**：
   - 考虑直接得分
   - 考虑行动点增减变化（权重6000）
   - 考虑连锁反应数量（权重200）
   - 对低分值情况有特殊处理

5. **动画等待**：自动等待游戏动画结束，确保操作同步

## 特殊策略

1. **破局模式**：当无法找到标准的好点击时:
   - 首先寻找能增加行动点的格子
   - 其次寻找评估价值在阈值内的格子
   - 最后尝试随机点击

2. **动态点击延迟**：根据剩余行动点调整点击间隔
   - 行动点≤2时：使用最小延迟(50毫秒)
   - 行动点≤4时：使用中等延迟
   - 其他情况：使用标准延迟(150毫秒)

## 技术实现

1. **DOM操作**：通过选择器读取和操作游戏元素
2. **MutationObserver**：监测游戏动画状态变化
3. **异步编程**：使用async/await处理点击、等待等操作
4. **状态管理**：维护脚本的运行、暂停、停止等状态
5. **用户界面**：创建悬浮控制面板和日志区域

## 安全措施

1. **单次注入保护**：防止脚本重复注入
2. **动画等待**：确保操作同步，避免状态不一致
3. **异常处理**：对无法获取棋盘状态等异常情况进行处理
4. **超时检测**：对动画等待设置最长时间限制

## 用户交互

脚本提供了友好的控制面板，包括：
- 开始/暂停/继续按钮
- 重置按钮
- 日志区域（可折叠）
- 导出日志功能
- 状态显示

这个脚本是一个相当完整和复杂的游戏自动化解决方案，结合了游戏状态分析、策略计算、模拟预测和用户界面于一体，为游戏提供了高效的自动通关能力。
